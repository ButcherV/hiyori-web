.container {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  padding: 16px 16px 32px 16px;
  padding-top: 0px;
  position: relative;
}

/* ============================================================
   æ¸¸æˆèˆå°åŒºåŸŸ (Game Stage) 
   ============================================================ */

.gameArea {
  margin-top: 12px;
  margin-bottom: 24px;
  flex: 1; /* å æ®å‰©ä½™ç©ºé—´ */
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 8px;

  /* è§†è§‰æ ¸å¿ƒï¼šèšå…‰ç¯æ•ˆæœèƒŒæ™¯ */
  background-color: #f8fafc; /* æµ…ç°åº•è‰² */
  background-image: radial-gradient(
    circle at 50% 40%,
    #ffffff 0%,
    #f1f5f9 60%,
    #e2e8f0 100%
  );

  border-radius: 12px; /* å¤§åœ†è§’ */

  /* ç»†è…»çš„å†…é˜´å½±ï¼Œå¢åŠ å±‚æ¬¡æ„Ÿ */
  box-shadow:
    inset 0 2px 4px rgba(255, 255, 255, 0.5),
    inset 0 -2px 4px rgba(0, 0, 0, 0.02),
    0 1px 2px rgba(0, 0, 0, 0.05);

  position: relative;
  overflow: hidden;
}

/* è£…é¥°ï¼šèƒŒæ™¯ç‚¹é˜µçº¹ç† (ç±»ä¼¼ Level 1) */
.gameArea::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  /* ææ·¡çš„åœ†ç‚¹çŸ©é˜µ */
  background-image: radial-gradient(#94a3b8 1px, transparent 1px);
  background-size: 24px 24px;
  opacity: 0.15;
  pointer-events: none;
  mask-image: radial-gradient(circle at center, black 40%, transparent 100%);
  -webkit-mask-image: radial-gradient(
    circle at center,
    black 40%,
    transparent 100%
  );
}

/* é¢˜é¢å®¹å™¨ */
.promptContainer {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 120px; /* ä¿è¯é«˜åº¦ï¼Œé¿å…è·³åŠ¨ */
  z-index: 1; /* æµ®åœ¨çº¹ç†ä¹‹ä¸Š */
}

.promptContent {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
}

.promptWithSpeaker {
  display: flex;
  flex-direction: column; /* æ”¹ä¸ºå‚ç›´æ’åˆ—ï¼Œå–‡å­åœ¨æ–‡å­—ä¸‹æ–¹ï¼Œæ›´å¹³è¡¡ */
  align-items: center;
  gap: 12px;
}

/* ğŸŸ¢ é¢˜ç›®æ–‡å­—ï¼šæ‚¬æµ®è´¨æ„Ÿ */
.promptText {
  font-size: 72px; /* åŠ å¤§ */
  font-weight: 800;
  color: #334155; /* Slate-700 */
  line-height: 1.1;
  text-align: center;

  /* æµ®èµ·æ•ˆæœï¼šä¸‹æ–¹æ·±è‰²é˜´å½± + ä¸Šæ–¹ç™½è‰²é«˜å…‰ */
  text-shadow:
    0 4px 12px rgba(0, 0, 0, 0.08),
    0 1px 0 rgba(255, 255, 255, 1);

  transition: transform 0.2s;

  display: flex;
  flex-wrap: wrap; /* å…è®¸æ¢è¡Œ */
  justify-content: center;
  gap: 2px; /* å—ä¹‹é—´ç•™ä¸€ç‚¹å¾®å°çš„ç¼éš™ï¼Œé˜²æ­¢ç²˜è¿ */
  word-break: normal; /* ç§»é™¤ä¹‹å‰çš„ break-allï¼Œé˜²æ­¢æš´åŠ›æˆªæ–­ */
}

/* è¯­ä¹‰ç§¯æœ¨å—ï¼šæ ¸å¿ƒæ˜¯ inline-block å’Œ nowrap */
/* è¿™è®© [ã•ã‚“ãœã‚“] ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¦ä¹ˆéƒ½åœ¨è¿™ä¸€è¡Œï¼Œè¦ä¹ˆéƒ½å»ä¸‹ä¸€è¡Œ */
.semanticChunk {
  display: inline-block;
  white-space: nowrap;
}

/* åŠ¨æ€å­—å·è°ƒæ•´ */
.promptText.smallText {
  font-size: 56px;
}
.promptText.littleText {
  font-size: 40px;
}
.promptText.tinyText {
  font-size: 28px;
}

/* å°å–‡å­æŒ‰é’® (æ–‡å­—é¢˜æ—è¾¹çš„) */
.speakerBtn {
  width: 48px;
  height: 48px;
  border-radius: 24px;
  border: none;

  background: #ffffff;
  color: var(--color-Blue);

  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);

  /* æ¼‚æµ®é˜´å½± */
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.05),
    0 1px 2px rgba(0, 0, 0, 0.05);
}

.speakerBtn:active {
  transform: scale(0.9);
  background: #f1f5f9;
}

/* ç®—å¼é¢˜é¢ */
.formulaPrompt {
  display: flex;
  align-items: center;
  gap: 16px;
  font-size: 48px; /* åŠ å¤§ */
  font-weight: 700;
  color: #334155;

  /* åŒæ ·åŠ æŠ•å½± */
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.formulaPart {
  padding: 8px 20px;
  background: #ffffff;
  border-radius: 16px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.03); /* å¡ç‰‡æ„Ÿ */
  border: 1px solid rgba(0, 0, 0, 0.02);
}

.formulaOperator {
  color: #94a3b8; /* æµ…ç°è‰²çš„åŠ å·ï¼Œä¸æŠ¢æˆ */
  font-weight: 900;
}

/* ğŸŸ¢ å¤§éŸ³é¢‘æŒ‰é’® (å¬éŸ³é¢˜)ï¼šé«˜çº§æ¸å˜ + å¼¥æ•£å…‰ */
.audioBtn {
  width: 96px; /* æ›´å¤§ */
  height: 96px;
  border-radius: 50%;
  border: none;

  /* é²œè‰³çš„æ¸å˜ */
  background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 50%, #2563eb 100%);
  color: white;

  display: flex;
  flex-direction: column; /* å›¾æ ‡+æ–‡å­—å‚ç›´æ’åˆ— */
  align-items: center;
  justify-content: center;
  gap: 4px;

  cursor: pointer;

  /* å¼ºçƒˆçš„å¼¥æ•£æŠ•å½± */
  box-shadow:
    0 12px 30px -8px rgba(37, 99, 235, 0.5),
    0 4px 6px -2px rgba(37, 99, 235, 0.3),
    inset 0 2px 4px rgba(255, 255, 255, 0.3); /* é¡¶éƒ¨é«˜å…‰ */

  transition:
    transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1),
    box-shadow 0.3s;
}

.audioBtn:active {
  transform: scale(0.92);
  box-shadow:
    0 6px 16px -4px rgba(37, 99, 235, 0.4),
    inset 0 2px 4px rgba(255, 255, 255, 0.2);
}

/* æ’­æ”¾æ³¢çº¹åŠ¨ç”» (å¯é€‰ï¼Œéœ€é…åˆ JS çŠ¶æ€) */
/* .audioBtn.playing { animation: pulse 1s infinite; } */

/* ============================================================
   ğŸŸ¢ ç­”æ¡ˆåŒºåŸŸ (Answer Area) - è§†è§‰å‡çº§ç‰ˆ
   ============================================================ */

.answerContainer {
  width: 100%;
  max-width: 360px; /* é™åˆ¶æœ€å¤§å®½åº¦ï¼Œé˜²æ­¢åœ¨å¤§å±ä¸Šå¤ªé•¿ */
  display: flex;
  flex-direction: column;
  gap: 16px; /*ç¨å¾®æ‹‰å¤§é—´è·ï¼Œæ›´é€æ°” */
  margin: 0 auto; /* å±…ä¸­ */
}

/* 1. è¾“å…¥æ¡†å®¹å™¨ï¼šæ”¹ä¸ºâ€œå®ä½“å¡ç‰‡â€é£æ ¼ */
.assemblyArea {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 6px 8px 6px 16px; /* å³ä¾§ç•™ç»™æŒ‰é’®ï¼Œå·¦ä¾§æ–‡å­—ç•™ç™½ */

  /* è§†è§‰æ ¸å¿ƒï¼šç™½è‰²èƒŒæ™¯ + æå…¶ç»†è…»çš„é˜´å½± */
  background: #ffffff;
  border-radius: 12px; /* æ›´åœ†æ¶¦ */

  /* è¾¹æ¡†ï¼šå¹³æ—¶æ˜¯æ·¡ç°è‰²ï¼Œä¸è¦è™šçº¿ */
  border: 2px solid #e2e8f0;

  /* æŠ•å½±ï¼šç»™ä¸€ç‚¹æµ®èµ·çš„æ„Ÿè§‰ */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);

  /* é™åˆ¶é«˜åº¦ */
  height: 64px;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ç­”é¢˜çŠ¶æ€ï¼šå¾®å¾®å‘è“å…‰ï¼Œè¡¨ç¤ºæ¿€æ´» */
/* æ³¨æ„ï¼šéœ€è¦åœ¨ TSX é‡Œç»™ answerContainer åŠ ä¸ª active ç±»ï¼Œæˆ–è€…ç›´æ¥åˆ©ç”¨ React state */
/* è¿™é‡Œé»˜è®¤ç”¨è¾¹æ¡†é¢œè‰²å˜åŒ–æ¥ä½“ç° */

.assemblySlots {
  flex: 1;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: flex-start; /* æ–‡å­—å·¦å¯¹é½æˆ–å±…ä¸­çœ‹å–œå¥½ï¼Œè¿™é‡Œæ¨è flex-start é…åˆ padding */
  overflow: hidden;
}

.assemblyPlaceholder {
  color: var(--color-Gray5);
  font-size: 15px;
  font-weight: 500;
  opacity: 0.8;
}

/* æ–‡å­—æ ·å¼ï¼šæ›´æ¸…æ™°ã€æ›´ç²— */
.assembledText {
  font-size: 28px;
  font-weight: 700;
  color: var(--color-Gray9); /* æ·±ç°/é»‘ */
  font-family: var(--font-family-ja);
  line-height: 1.1;

  /* å…è®¸é•¿æ–‡å­—æ¢è¡Œ */
  word-break: break-all;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* åŠ¨æ€å­—å· (é…åˆä½ ä¹‹å‰çš„ JS ä¿®æ”¹) */
.textMedium {
  font-size: 22px;
}
.textSmall {
  font-size: 18px;
}
.textTiny {
  font-size: 15px;
}

/* 2. é€€æ ¼æŒ‰é’®ï¼šæ”¹ä¸º 3D å®ä½“æŒ‰é”® */
.backspaceBtn {
  width: 48px;
  height: 48px;
  border-radius: 12px;

  /* 3D ç»“æ„ */
  background: #f1f5f9; /* æµ…ç°è¡¨é¢ */
  border: 1px solid #cbd5e1; /* è½®å»“ */
  border-bottom: 3px solid #94a3b8; /* ğŸŸ¢ åº•éƒ¨åŠ åšï¼Œå½¢æˆç«‹ä½“æ„Ÿ */

  color: var(--color-Gray6);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.1s;

  /* å›¾æ ‡ */
  font-size: 20px;
  font-weight: 700;
}

/* æŒ‰ä¸‹æ•ˆæœï¼šåƒçœŸæŒ‰é’®ä¸€æ ·é™·ä¸‹å» */
.backspaceBtn:not(:disabled):active {
  transform: translateY(2px); /* ä¸‹ç§» */
  border-bottom-width: 1px; /* åº•éƒ¨å˜è–„ */
  background: #e2e8f0;
  color: var(--color-Gray8);
}

.backspaceBtn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
  border-bottom-width: 1px; /* ç¦ç”¨æ—¶æ‹æ‰ */
  /* transform: translateY(2px); */
}

/* 3. è¿›åº¦æ¡ï¼šèƒ¶å›ŠåŒ– + æ¸å˜ */
.progressIndicator {
  width: 100%;
  height: 8px; /* åŠ ç²— */
  background: #f1f5f9; /* è½¨é“é¢œè‰² */
  border-radius: 99px; /* èƒ¶å›Šåœ†è§’ */
  overflow: hidden;
  /* border: 1px solid rgba(0,0,0,0.02); */
  position: relative;
}

.progressBar {
  height: 100%;
  border-radius: 99px;

  /* ğŸŸ¢ æ¸å˜è‰²ï¼šè®©è¿›åº¦çœ‹èµ·æ¥æ›´é«˜çº§ */
  background: linear-gradient(90deg, var(--color-Blue) 0%, #60a5fa 100%);

  transition:
    width 0.3s cubic-bezier(0.34, 1.56, 0.64, 1),
    background-color 0.2s;

  /* å¯é€‰ï¼šåŠ ä¸ªå…‰æ³½æ„Ÿ */
  box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);
}

/* ============================================================
   çŠ¶æ€åé¦ˆ (Feedback States)
   ============================================================ */

/* é”™è¯¯æ—¶ï¼šè¾¹æ¡†å˜çº¢ï¼ŒèƒŒæ™¯å¾®çº¢ */
.answerContainer.error .assemblyArea {
  border-color: #fca5a5; /* Red-300 */
  background-color: #fef2f2; /* Red-50 */
  animation: shake 0.4s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
}

.answerContainer.error .progressBar {
  background: #ef4444; /* çº¯çº¢ */
  box-shadow: 0 2px 4px rgba(239, 68, 68, 0.3);
}

/* æˆåŠŸæ—¶ï¼šè¾¹æ¡†å˜ç»¿ï¼ŒèƒŒæ™¯å¾®ç»¿ */
.answerContainer.success .assemblyArea {
  border-color: #86efac; /* Green-300 */
  background-color: #f0fdf4; /* Green-50 */
  transform: scale(1.02); /* å¾®å¾®æ”¾å¤§ */
}

.answerContainer.success .progressBar {
  background: #10b981; /* Emerald-500 */
}

/* éœ‡åŠ¨åŠ¨ç”»å…³é”®å¸§ */
@keyframes shake {
  10%,
  90% {
    transform: translate3d(-1px, 0, 0);
  }
  20%,
  80% {
    transform: translate3d(2px, 0, 0);
  }
  30%,
  50%,
  70% {
    transform: translate3d(-3px, 0, 0);
  }
  40%,
  60% {
    transform: translate3d(3px, 0, 0);
  }
}

.shakeAnim {
  animation: shake 0.5s ease-in-out;
}

/* é”®ç›˜åŒºåŸŸ (å¾®è°ƒé—´è·) */
.keyboardContainer {
  flex-shrink: 0;
  padding-top: 16px;
}

.disabledKeyboard {
  opacity: 0.5;
  pointer-events: none;
  filter: grayscale(0.5); /* ç¦ç”¨æ—¶ç¨å¾®å˜ç° */
}
