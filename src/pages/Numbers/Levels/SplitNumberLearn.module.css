.container {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  padding: 0px 16px 32px 16px;
  background-color: var(--bg-app);
  overflow: hidden;
}

.stage {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  position: relative; /* 为底部 note 的定位做准备 */
  margin-bottom: 32px;
}

/* --- 100 单体 --- */

.kanjiLeft {
  display: flex;
}
.hiddenLeft {
  opacity: 0;
  pointer-events: none; /* 防止消失后还能交互 */
}

/* --- 200+ 双体 --- */
.splitModeContainer {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  width: 100%;
  position: relative;
}

/* 汉字部分 */
.kanjiRow {
  display: flex;
  align-items: center;
  justify-content: center; /* 关键：居中对齐，确保左边没了右边会自动居中 */
  font-size: 88px;
  font-weight: 900;
  color: var(--color-Gray10);
  line-height: 1;
  /* 加上相对定位，保证 layout 动画平滑 */
  position: relative;
}

.kanjiWindow {
  height: 88px;
  min-width: 100px;
  overflow: hidden;
  position: relative;
}

.kanjiReel {
  display: flex;
  flex-direction: column;
}

.kanjiCell {
  height: 88px;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding-right: 4px;
}

.kanjiRight {
  min-width: 100px;
  padding-left: 0;
  display: flex;
  align-items: center;
}

.ghostText {
  color: #e2e8f0;
  opacity: 0.5;
}

/* --- 罗马音 + 喇叭布局 --- */

.romajiWrapper {
  height: 32px;
  width: 100%;
  position: relative;
  /* 这里不需要 flex，因为 flex 交给内部的 motion div 了 */
  margin-bottom: 8px;
}

.romajiMotionContainer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px; /* 文字和喇叭的间距 */

  /* 确保它在最上层，防止被遮挡 */
  z-index: 5;
}

.romajiText {
  font-size: 24px;
  color: var(--color-Blue);
  font-weight: 700;
  letter-spacing: 0.05em;
  text-transform: lowercase;
  /* 防止文字换行破坏布局 */
  white-space: nowrap;
}

.speakerIcon {
  color: var(--color-Gray6);
  cursor: pointer;
  display: flex;
  align-items: center;
  transition: transform 0.1s;
}

.speakerIcon:active {
  transform: scale(0.9);
}

/* 优化方案：如果文字长度不固定，还是用 Flex 比较好。
   我们在 TSX 里把 romaji 和 speaker 包在一个 div 里，
   或者让 romajiWrapper 就是 flex center。
   下面是配合 TSX 修改后的 Flex 方案：
*/
.romajiContent {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  /* 这个容器用来包裹 文字+喇叭，作为整体进出场 */
}

/* ----------------------------- */

/* --- 滚动部分 --- */
.drumsContainer {
  display: flex;
  gap: 0px;
  align-items: flex-start;
  justify-content: center; /* 关键：居中对齐 */
}

.drumsLeftWrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  /* 这是一个容器，用于控制宽度和透明度 */
}

.columnWrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  width: 130px; /* 和 scrollWindow 同宽 */
}

/* 滚动窗口：3D 舞台 */
.scrollWindow {
  height: 64px;
  width: 100%; /* 撑满 columnWrapper */
  background: white;
  border-radius: 12px;
  position: relative;
  box-shadow:
    inset 0 2px 4px rgba(0, 0, 0, 0.02),
    0 4px 6px -1px rgba(0, 0, 0, 0.05);
  /* border: 1px solid var(--color-Gray3); */

  perspective: 800px;
  overflow: hidden;
}

/* 滚动单元格 */
.cellAbsolute {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  /* padding 由 12px 改为 0，因为我们要用 flex justify 控制间距，或者保留 padding 但需注意 center 时是否影响 */
  /* 这里保留 padding，因为 flex-start 时需要边距，center 时视觉上加上 padding 也问题不大，或者动态控制 */
  padding: 0 12px;

  font-size: 38px;
  font-weight: 800;
  color: #64748b;
  /* justify-content 由 Motion Variants 控制 */
}

.cellReelItem {
  height: 64px;
  width: 100%;
  display: flex;
  align-items: center;
  font-size: 38px;
  font-weight: 800;
  color: #64748b;
  padding: 0 12px;
}

.alignLeft {
  justify-content: flex-start;
}
.alignRight {
  justify-content: flex-end;
}
.alignCenter {
  justify-content: center;
}

/* 翻转动效样式 */
.flipperContainer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 20;
  pointer-events: none;
  transform-style: preserve-3d;
}

.flipFace {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  background-color: #ffffff;
  font-size: 38px;
  font-weight: 800;
  padding: 0 12px;
  backface-visibility: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.flipFaceOld {
  color: #64748b;
  z-index: 1;
}

.flipFaceNew {
  color: var(--color-error);
  z-index: 2;
  background-color: var(--color-weak-bg);
}

/* 演化提示词 (放在 ScrollWindow 下面) */
.evolutionHint {
  height: 20px;
  font-size: 14px;
  color: var(--color-Gray7);
  font-weight: 900;
  display: flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
}

.evolutionArrow {
  margin: 0 4px;
  color: var(--color-Gray7);
}

.evolutionHigh {
  color: var(--color-error);
  font-weight: 900;
}

/* .drumsWrapper {
  position: relative;
} */

/* 底部解释 Note */
.noteContainer {
  position: absolute;
  bottom: -16px;
  transform: translateY(100%);
  left: 0;
  width: 100%;
  display: flex;
  justify-content: center;
  /* padding-bottom: 24px; */
}

.noteBadge {
  background-color: var(--color-Gray2);
  color: var(--color-Gray8);
  padding: 6px 16px;
  border-radius: 20px;
  font-size: 13px;
  font-weight: 500;
  text-align: center;
  border: 1px dashed var(--color-Gray4);
  max-width: 90%;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.03);
}
