# 数字学习关卡设计文档

## Level 2: 十位组合 (11-99)

### 核心规则
- 无音便，直接拼接
- 十位 + じゅう + 个位
- 个位为 0 时省略（如 20 = にじゅう）

### 题型与键盘对照表

| 题型 | 题面 | 答案类型 | 键盘配置 |
|------|------|----------|----------|
| `arabic-to-kana` | 47 | 假名 | 数字假名(10键) |
| `arabic-to-kanji` | 47 | 汉字 | 汉字(10键) |
| `kanji-to-kana` | 四十七 | 假名 | 数字假名(10键) |
| `kana-to-arabic` | よんじゅうなな | 阿拉伯数字 | 数字(10键) |
| `kana-to-kanji` | よんじゅうなな | 汉字 | 汉字(10键) |
| `formula-to-kana` | 40+7 | 假名 | 数字假名(10键) |
| `audio-to-arabic` | 🔊 | 阿拉伯数字 | 数字(10键) |
| `audio-to-kanji` | 🔊 | 汉字 | 汉字(10键) |
| `audio-to-kana` | 🔊 | 假名 | 数字假名(10键) |

### 键盘配置详情

#### 1. 数字假名键盘 (Level 2)
```
いち, に, さん, よん, ご, ろく, なな, はち, きゅう, じゅう
```

#### 2. 汉字键盘
```
一, 二, 三, 四, 五, 六, 七, 八, 九, 十
```

#### 3. 阿拉伯数字键盘
```
0, 1, 2, 3, 4, 5, 6, 7, 8, 9
```

---

## Level 3: 百位学习 (100-900)

### 核心规则
- 十位数字 + ひゃく（常规）
- **音便变体**：
  - 300: さん + **びゃく** (h→b)
  - 600: **ろっ** + **ぴゃく** (促音+半浊音)
  - 800: **はっ** + **ぴゃく** (促音+半浊音)

### 键盘扩展需求

Level 3 需要向下兼容（能答 84 这样的两位数），同时支持百位音便。

#### 扩展后的假名键盘 (Level 3)
```
基础数字: いち, に, さん, よん, ご, ろく, なな, はち, きゅう
单位: じゅう, ひゃく
音便变体: びゃく, ぴゃく, ろっ, はっ
```
**共 16 个按键**

### 题型示例

| 题型 | 题面 | 正确答案 | 考察点 |
|------|------|----------|--------|
| `arabic-to-kana` | 284 | にひゃくはちじゅうよん | 常规百位 |
| `arabic-to-kana` | 384 | さん**びゃく**はちじゅうよん | 连浊音便 |
| `arabic-to-kana` | 684 | **ろっぴゃく**はちじゅうよん | 促音+半浊音 |
| `arabic-to-kana` | 84 | はちじゅうよん | 向下兼容(Level 2) |

---

## Level 4: 千位学习 (1000-9000)

### 核心规则
- 数字 + せん（常规）
- **音便变体**：
  - 3000: さん + **ぜん** (s→z)
  - 8000: **はっ** + せん (促音)

### 键盘扩展需求

#### 扩展后的假名键盘 (Level 4)
```
基础数字: いち, に, さん, よん, ご, ろく, なな, はち, きゅう
单位: じゅう, ひゃく, せん
音便变体: びゃく, ぴゃく, ぜん, はっ, ろっ
```
**共 17 个按键**

---

## 键盘演进总结

| 关卡 | 数字键 | 单位键 | 变体键 | 总计 |
|------|--------|--------|--------|------|
| Level 2 | 9 | 1 (じゅう) | 0 | 10 |
| Level 3 | 9 | 2 (+ひゃく) | 4 | 15 |
| Level 4 | 9 | 3 (+せん) | 5 | 17 |

---

## 实现考虑

### 1. 键盘动态配置
- 根据 `quizType` 确定答案类型
- 根据答案类型选择对应键盘
- 高级关卡（L3/L4）的键盘包含低级关卡的所有按键

### 2. 答案验证
- Level 2: 严格匹配拼接结果
- Level 3/4: 同样需要严格匹配（如 600 必须选「ろっぴゃく」而非「ろくひゃく」）

### 3. 题型复用
- `arabic-to-kana` 等核心题型在所有关卡通用
- 通过 `numberRange` 控制出题范围（如 L3 只出 100-999）
- 通过 `quizTypes` 数组控制题型组合
